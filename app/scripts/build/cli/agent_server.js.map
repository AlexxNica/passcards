{"version":3,"file":"agent_server.js","sourceRoot":"","sources":["../../cli/agent_server.ts"],"names":["currentVersion","logf","parseJSONRequest","Server","Server.constructor","Server.listen","Server.resetKeyTimeout","isCurrentVersionRunning","agentPID","launchAgent","startAgent","stopAgent"],"mappings":"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"}